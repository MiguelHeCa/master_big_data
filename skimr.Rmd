---
title: "skim"
author: "Miguel Hernández"
date: "12/7/2019"
output: 
  pdf_document:
    latex_engine: xelatex
    number_section: true
lang: es
mainfont: Open Sans
bibliography: ref/refm3.bib
abstract: | 
  Se utilizaron análisis de componentes principales, análisis factorial, escalamiento multidimensional y coordenadas principales
  
  **Palabras clave**: Análisis, Multivariante, Factorial, Discriminante, Escalamiento Multidimensional, Coordenadas principales
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_knit$set(kable.force.latex=FALSE)

library(Hmisc)
library(magrittr)
library(psych)
library(FactoMineR)
library(factoextra)
library(ggrepel)
library(cluster)
library(smacof)
library(ggthemes)
library(skimr)
```

# Introducción

Al momento de analizar información normalmente se utilizan métodos lineales como primera línea de análisis. Sin embargo, el investigador varias veces se enfrenta con que los datos no cumplen con los supuestos requeridos por los modelos lineales. En estos casos, la variabilidad es considerada como ruido en lugar de aportar algo importante. 

No obstante, la invariabilidad no es normal en el mundo real, por lo que es necesario utilizar otros métodos para poder acceder a información a partir de la heterogeneidad de los datos. Por ello, en este estudio utilizaremos métodos multivariantes que permiten extraer información pertinente a partir de la variabilidad.

# Análisis exploratorio de datos

Los datos con los que trabajaremos provienen de ejemplos utilizados para ejemplificar el funcionamiento de los métodos multivariantes. Se refieren a la composición alimenticia en países del continente europeo en años donde todavía existía la Unión Soviética, Checoslovaquia, Yugoslavia y las dos repúblicas alemanas.

```{r, include=FALSE}
alim = foreign::read.spss("data/M3/PaisesProteinasExamen.sav", to.data.frame = T)
alim$Pais = trimws(alim$Pais)

prot = Filter(is.numeric, alim)
rownames(prot) = alim$Pais

proteinas = alim
colnames(proteinas) = c("País", "Carne roja", "Carne blanca", "Huevos",
                        "Leche", "Pescado", "Cereales", "Féculas", 
                        "Frutos secos", "Frutos y vegetales", "Comunista",
                        "Localización")

mi_skim =
  skim_with(
    factor = sfl(
      ordered = NULL
    ),
    numeric = sfl(hist = NULL)
  )

eskim = mi_skim(proteinas)

eskim$n_missing = NULL
eskim$complete_rate = NULL

res_eskim = summary(eskim)
rownames(res_eskim) = c(
  "Nombre",
  "Número de filas",
  "Número de columnas",
  "_________________________ ",
  "Frecuencia de cada tipo: ",
  "character",
  "factor", 
  "numeric",
  "_________________________  ",
  "Variables de agrupación"
)
res_eskim[10, 1] = "Ninguna"
```

```{r}
knitr::kable(
  res_eskim,
  caption = "Resumen general",
  col.names = "Valores",
  label = "tab:gen"
)
```

```{r num}
knitr::kable(
  partition(eskim)[[3]],
  caption = "Resumen de variables de composición alimenticia",
  col.names = c("Variable", "Media", "D.E.", "Q1", "Q2", "Q3", "Q4", "Q5"),
  digits = 3
)
```

```{r fac}
knitr::kable(
  partition(eskim)[[2]],
  caption = "Resumen de variables categóricas",
  col.names = c("Variable", "Único", "Conteo")
)
```

El cuadro \ref{tab:gen} señala que contamos con la información 25 países explicados en 12 variables: `r paste(toString(colnames(proteinas)[1:11]), "y", colnames(proteinas)[12])`. El cuadro \@ref(tab:num) señala los datos descriptivos de la composición alimenticia de la dieta de los países que nos ocupan. Finalmente, el cuadro \@ref(tab:fac) muestra la distribución de las categorías entre aquellos países identificados con el comunismo y su región.

Como primera instancia, queremos saber si con las variables de composición alimenticia se encuentra colinealidad, uno de los principales obstáculos para el uso de métodos lineales.